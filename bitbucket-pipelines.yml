image: rust:latest

options:
  max-time: 6

pipelines:
  default:
    - step:
        caches:
          - cargo-home
          - cargo-target
        name: Build
        script:
          - rustup update
          - apt-get update && apt-get install -y libsdl2-dev
          - cargo build --verbose
    - step:
        caches:
          - cargo-home
          - cargo-target
        name: Test
        script:
          - rustup update
          - apt-get update && apt-get install -y libsdl2-dev
          - cargo test --verbose
definitions:
  caches:
    cargo-home: $HOME/.cargo
    cargo-target: target